<%graphql
  fragment Repository on Repository {
    id
    viewerHasStarred
    stargazers {
      totalCount
    }
  }
%>
<% repository = Views::Repositories::Star::Repository.new(repository) %>

<span class="star-badge">
  <%= repository.stargazers.total_count %>
  <a class="js-toggle-star" href="<%= repository.viewer_has_starred? ? unstar_repository_path(CGI.escape(repository.id)) : star_repository_path(CGI.escape(repository.id)) %>">
    <span class="octicon octicon-star <% if repository.viewer_has_starred? %>highlight<% end %>"></span>
  </a>
</span>
